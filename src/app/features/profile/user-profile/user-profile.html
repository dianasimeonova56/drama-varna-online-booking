<div class="profile-container" [class.edit-open]="isEditMode">
  <div class="profile-card">
    <div class="profile-header">
      <h2 class="username">{{ user()?.username }}</h2>
      <p class="email">{{ user()?.email }}</p>
    </div>

    <div class="profile-details">
      <div class="detail">
        <span class="label">Role:</span>
        <span class="value">{{ user()?.role }}</span>
      </div>
      <div class="detail">
        <span class="label">Booked plays: </span>
        <span class="value">{{bookedPlaysNum()}}</span>
      </div>
      <div class="plays-btn">
        <button class="btn primary" routerLink="/my-bookings" routerLinkActive="active">See Booked
          Plays</button>
      </div>

    </div>

    <div class="profile-actions">
      <button class="btn primary" (click)="toggleEdit()">Edit Profile</button>
    </div>


  </div>
  @if(isEditMode) {
  <div [@editToggle]="isEditMode ? 'open' : 'closed'" class="profile-edit">
    <h3>Edit Profile</h3>
    <form [formGroup]="editProfileForm" (ngSubmit)="onSave()">

      <div class="form-group">
        <label for="username">Username</label>
        <input type="text" id="username" formControlName="username" required>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" formControlName="email" required>
      </div>
      <button type="submit" class="btn primary" [disabled]="editProfileForm.invalid" (click)="onSave()">
        Save Changes
      </button>
    </form>
  </div>
  }
</div>